<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="manifest" href="manifest.json" />

<meta name="theme-color" content="white" />
  
  <title>דוח פיננסי</title>

  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <h1>דוח פיננסי <span id="toggle-icon" style="cursor: pointer;">🔒</span></h1>

  <!-- כפתורי ניווט -->
  <div class="tabs">
    <button class="tab-button" onclick="showCurrentReport()">דוח נוכחי 📊</button>
    <button class="tab-button" onclick="showHistory()">היסטוריה 🕒</button>
    <button class="tab-button" onclick="showSummary()">סיכום 📈</button>
  </div>

  <!-- אנימציית טעינה -->
  <div id="loader" class="loader-wrapper" style="display: none;">
    <div class="loader-animation"></div>
    
    <div class="loader-checkmark" style="display: none;">
      <svg viewBox="0 0 52 52" class="checkmark">
        <path class="checkmark-check" fill="none" d="M14 27l10 10 16-20"/>
      </svg>
    </div>
    
    <div class="loader-cross" style="display: none;">
      <svg viewBox="0 0 52 52" class="crossmark">
        <line x1="16" y1="16" x2="36" y2="36" stroke="#e74c3c" stroke-width="5" stroke-linecap="round"/>
        <line x1="36" y1="16" x2="16" y2="36" stroke="#e74c3c" stroke-width="5" stroke-linecap="round"/>
      </svg>
    </div>
    
    <p id="loader-text">טוען נתונים...</p>
  </div>

  <!-- דוח נוכחי -->
  <div id="current-view" class="container">
    <div id="container"></div>
  </div>

  <!-- היסטוריית חודשים -->
  <div id="history-view" class="container" style="display: none;">
    <div class="card controls-wrapper">
      <div class="controls-row">
        <select id="dateSelect" onchange="onDateChange()">
          <option value="" disabled selected>בחר תאריך</option>
        </select>
        <button onclick="toggleForm()" class="add-button">➕ הוסף חודש חדש</button>
      </div>
    </div>

<!-- טופס הוספת חודש חדש -->
<div id="new-entry-form" class="card" style="display:none; margin-top: 16px;">
  <h3>הכנס נתונים לחודש חדש:</h3>
  <label>📅 תאריך: <input type="date" id="newDate" /></label>
  
  <div id="dynamic-fields"></div> <!-- 🧠 כאן ייכנסו השדות הדינמיים -->
  
  <button onclick="submitNewEntry()">📤 שלח</button>
</div>

    <!-- תצוגת דוח להיסטוריה -->
    <div id="history-card" class="card" style="display:none;"></div>
  </div>
  
  
  <!-- סיכום עם גרף -->
  <div id="summary-view" class="container" style="display:none; margin-top: 12px;">
    <div class="card controls-wrapper" style="padding:12px 16px;">
      <div class="summary-controls" style="display:flex; justify-content:center; gap:8px; align-items:center;">
        <button class="time-button active" data-months="3" onclick="setSummaryWindow(3)">3 חודשים</button>
        <button class="time-button" data-months="6" onclick="setSummaryWindow(6)">6 חודשים</button>
        <button class="time-button" data-months="12" onclick="setSummaryWindow(12)">שנה</button>
      </div>
    </div>

    <div class="card" style="padding: 12px;">
      <div style="text-align: center; margin-bottom: 8px; font-weight:700;">סיכום נכסים</div>
      <canvas id="summaryChart" width="800" height="420"></canvas>
    </div>
  </div>

  <!-- הודעת הצלחה -->
  <div id="success-message" class="success-message" style="display: none;">
    <p></p>
  </div>
  
  <footer style="text-align:center; margin-top:20px; font-size:0.9em; color:#888;">
  גרסה 1.5.0
</footer>

  <!-- סקריפטים -->
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>