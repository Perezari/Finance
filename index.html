<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="white" />
  
  <!-- כפתור קיצור לגוגל שיטס -->
<a href="https://docs.google.com/spreadsheets/d/19dofQI-ay91ZAq40-fySZMdh_riryWmXGpqdbvqVb34/edit?usp=drivesdk" 
   target="_blank" 
   class="sheets-shortcut" 
   title="פתח את Google Sheets">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="28px" height="28px">
    <path fill="#0f9d58" d="M6 42V6c0-2.2 1.8-4 4-4h20l12 12v28c0 2.2-1.8 4-4 4H10c-2.2 0-4-1.8-4-4z"/>
    <path fill="#fff" d="M16 28h16v2H16zm0-6h16v2H16zm0-6h10v2H16z"/>
    <path fill="#87ceac" d="M30 2v10h10z"/>
  </svg>
</a>
  
  <title>דוח פיננסי</title>

  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>

  <div id="loader" class="loader-wrapper">
    <div class="loader-animation"></div>   
    <div class="loader-checkmark" style="display: none;">
      <svg viewBox="0 0 52 52" class="checkmark">
        <path class="checkmark-check" fill="none" d="M14 27l10 10 16-20"/>
      </svg>
    </div>
    
    <div class="loader-cross" style="display: none;">
      <svg viewBox="0 0 52 52" class="crossmark">
        <line x1="16" y1="16" x2="36" y2="36" stroke="#e74c3c" stroke-width="5" stroke-linecap="round"/>
        <line x1="36" y1="16" x2="16" y2="36" stroke="#e74c3c" stroke-width="5" stroke-linecap="round"/>
      </svg>
    </div>   
    <p id="loader-text">טוען נתונים...</p>
  </div>

  <h1>דוח פיננסי <span id="toggle-icon" style="cursor: pointer;">🔒</span></h1>

  <!-- כפתורי ניווט -->
  <div class="tabs">
    <button class="tab-button active" onclick="showCurrentReport()">דוח נוכחי 📊</button>
    <button class="tab-button" onclick="showHistory()">היסטוריה 🕒</button>
  </div>

  <!-- דוח נוכחי -->
  <div id="current-view" class="container">
    <div id="container"></div>
  </div>

  <!-- היסטוריית חודשים -->
  <div id="history-view" class="container" style="display: none;">
    <div class="card controls-wrapper">
      <div class="controls-row">
        <select id="dateSelect" onchange="onDateChange()">
          <option value="" disabled selected>בחר תאריך</option>
        </select>
        <button onclick="toggleForm()" class="add-button">➕ הוסף חודש חדש</button>
      </div>
    </div>

  <!-- טופס הוספת חודש חדש -->
  <div id="new-entry-form" class="card" style="display:none; margin-top: 16px;">
  <h3>הכנס נתונים לחודש חדש:</h3>
  <label>📅 תאריך: <input type="date" id="newDate" /></label>
  
  <div id="dynamic-fields"></div> <!-- 🧠 כאן ייכנסו השדות הדינמיים -->
  
  <button onclick="submitNewEntry()">📤 שלח</button>
  </div>

    <!-- תצוגת דוח להיסטוריה -->
  <div id="history-card" class="card" style="display:none;"></div>
  </div>

  <!-- הודעת הצלחה -->
  <div id="success-message" class="success-message" style="display: none;">
    <p></p>
  </div>
  
  <footer style="text-align:center; margin-top:20px; font-size:0.9em; color:#888;">
  גרסה 1.5.0
  </footer>

  <!-- סקריפטים -->
  <script src="config.js"></script>
  <script src="script.js"></script>

</body>
</html>